var mapPage={initialize:function(){mapPage.attachEvents()},attachEvents:function(){mapPage.getResultForMap()},getResultForMap:function(){$("#processing-modal").modal("show");$.ajax({type:"GET",url:"/Map/PlotMarker",contentType:"application/json; charset=utf-8",dataType:"json",async:!0,cache:!1,success:function(n){mapPage.createMap(n)}})},createMap:function(n){var t=n;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){mapPage.initializeMap(n);mapPage.addLocationMarkers(n,t)}):swal("Warning","Geo Location feature is not supported in this browser.");$("#processing-modal").modal("hide")},initializeMap:function(n){initialLatLng=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);var t={center:initialLatLng,zoom:14,minZoom:2,mapTypeId:google.maps.MapTypeId.ROADMAP};initialMap=new google.maps.Map(document.getElementById("map"),t)},addLocationMarkers:function(n,t){var u=new google.maps.Marker({position:initialLatLng,map:initialMap,icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,fillColor:"#1a355e",strokeOpacity:.5,strokeColor:"#98BFEB",strokeWeight:60,scale:25},title:"Your location:<\/b><br />Latitude: "+n.coords.latitude+"<br />Longitude: "+n.coords.longitude}),r=new google.maps.InfoWindow({maxWidth:500}),e=new google.maps.LatLngBounds,f=[],f=[],i,h,c;for(f.push(u),i=0;i<t.length;i++){var s=new google.maps.LatLng(t[i].latitude,t[i].longitude),o=$("#previousPageValue").val();if(!/^-?((1?[0-7]?|[0-9]?)[0-9]|180)\.[0-9]{1,6}$/.test(t[i].latitude)){(o.toLowerCase()=="welllinereports"||o.toLowerCase()=="welldetails")&&swal("Asset Location","No valid location information available for this asset. The map will only show your current location and followed wells.");continue}marker=new google.maps.Marker({position:s});t[i].latitude!=null&&(t[i].isFavorite==!0?marker.setIcon("/images/favorite-location.png"):marker.setIcon("/images/location.png"));h=t[i];f.push(marker);t[0]==undefined?mapPage.showAlert():e.extend(marker.position);google.maps.event.addListener(marker,"click",function(n,i){return function(){r.setContent('<b><a href="#" id="direction"><img src="/images/car-Icon.png" /><\/a> &nbsp; <a href="/WellLineReport/Index?wellId='+Base64.encode(t[i].id.toString())+"&wellName="+Base64.encode(t[i].name.toString())+"&isFollow="+Base64.encode(t[i].isFavorite.toString())+'">'+t[i].name)+"<\/a><\/b>";r.open(initialMap,n);$("#direction").click(function(){mapPage.showDirection(t[i])})}}(marker,i));google.maps.event.addListener(u,"click",function(n){return function(){r.setContent("<b>Your Current Location<\/b>");r.open(initialMap,n)}}(u))}initialMap.fitBounds(e);c=new MarkerClusterer(initialMap,f,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});t.length==0&&mapPage.showAlert()},showDirection:function(n){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){mapPage.initializeMap(t);mapPage.getDirection(t,n)}):swal("Warning","Geo Location feature is not supported in this browser.")},getDirection:function(n,t){var i=new google.maps.InfoWindow({maxWidth:500}),u,r,f;u=t.isFavorite==!0?"/images/favorite-location.png":"/images/location.png";r=new google.maps.DirectionsRenderer;f=new google.maps.DirectionsService;r.setMap(initialMap);r.setOptions({suppressMarkers:!0});f.route({origin:{lat:n.coords.latitude,lng:n.coords.longitude},destination:{lat:t.latitude,lng:t.longitude},travelMode:google.maps.TravelMode.DRIVING},function(n,f){var o,e,s;f=="OK"?(r.setDirections(n),o=n.routes[0].legs[0],pinA=new google.maps.Marker({position:o.start_location,map:initialMap,icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,fillColor:"#1a355e",strokeOpacity:.5,strokeColor:"#98BFEB",strokeWeight:60,scale:25}}),pinB=new google.maps.Marker({position:o.end_location,map:initialMap,icon:u}),google.maps.event.addListener(pinB,"click",function(n){return function(){i.setContent('<b><a href="/WellLineReport/Index?wellId='+Base64.encode(t.id.toString())+"&wellName="+Base64.encode(t.name.toString())+"&isFollow="+Base64.encode(t.isFavorite.toString())+'">'+t.name)+"<\/a><\/b>";i.open(initialMap,n)}}(pinB)),google.maps.event.addListener(pinA,"click",function(n){return function(){i.setContent('<b><a href="#" id="navigationStep">Navigation Steps<\/a><\/b> &nbsp;');i.open(initialMap,n);$("#navigationStep").click(function(){mapPage.navigateStep(t)})}}(pinA)),e=[],e.push(pinA),e.push(pinB),s=new MarkerClusterer(initialMap,e,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})):mapPage.showRouteAlert()})},navigateStep:function(n){$("#map").addClass("col-lg-8");$("#panel").addClass("col-lg-4 scrolable-div");$("#drivingDirection").removeClass("hide-div");$("#drivingDirection").addClass("show-div mr-100");$("#headingMap").addClass("ml-15");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){mapPage.initializeMap(t);mapPage.getDrivingDirection(t,n)}):swal("Warning","Geo Location feature is not supported in this browser.")},getDrivingDirection:function(n,t){var r=new google.maps.InfoWindow({maxWidth:500}),u,i,f;u=t.isFavorite==!0?"/images/favorite-location.png":"/images/location.png";i=new google.maps.DirectionsRenderer;f=new google.maps.DirectionsService;i.setMap(initialMap);i.setPanel(document.getElementById("panel"));i.setOptions({suppressMarkers:!0});f.route({origin:{lat:n.coords.latitude,lng:n.coords.longitude},destination:{lat:t.latitude,lng:t.longitude},travelMode:google.maps.TravelMode.DRIVING},function(n,f){var o,e,s;f=="OK"?(i.setDirections(n),o=n.routes[0].legs[0],pinA=new google.maps.Marker({position:o.start_location,map:initialMap,icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,fillColor:"#1a355e",strokeOpacity:.5,strokeColor:"#98BFEB",strokeWeight:60,scale:25}}),pinB=new google.maps.Marker({position:o.end_location,map:initialMap,icon:u}),google.maps.event.addListener(pinA,"click",function(n){return function(){r.setContent("<b>Your Current Location<\/b>");r.open(initialMap,n)}}(pinA)),google.maps.event.addListener(pinB,"click",function(n){return function(){r.setContent('<b><a href="/WellLineReport/Index?wellId='+Base64.encode(t.id.toString())+"&wellName="+Base64.encode(t.name.toString())+"&isFollow="+Base64.encode(t.isFavorite.toString())+'">'+t.name.toString())+"<\/a><\/b>";r.open(initialMap,n)}}(pinB)),e=[],e.push(pinA),e.push(pinB),s=new MarkerClusterer(initialMap,e,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})):swal("Warning","Directions request failed due to "+f)})},showAlert:function(){swal("Asset Location","No location information available for this asset. The map will only show your current location and followed wells.")},showRouteAlert:function(){swal("Route Information","Route is not available for your destination from your current location.")}};