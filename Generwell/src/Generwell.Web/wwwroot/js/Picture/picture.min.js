var picturePage={initialize:function(){picturePage.attachEvents()},attachEvents:function(){picturePage.notification();picturePage.addPicture();picturePage.createCheckbox();picturePage.swapRadioButton();picturePage.deletePicture();picturePage.redirectToIndexPage();picturePage.uploadPicture();picturePage.validateImage()},redirectToIndexPage:function(){$("#cancel").click(function(){$("#processing-modal").modal("show");picturePage.redirectToPreviousPage()})},addPicture:function(){$("#addPicture").click(function(){var n,t;n=$("#albumId").val();$("#processing-modal").modal("show");t="/Picture/AddPicture?albumId="+Base64.encode(n);window.location.href=t})},editPicture:function(n,t,i,r,u){$("#processing-modal").modal("show");var f="/Picture/EditPicture?fileUrl="+Base64.encode(n)+"&label="+Base64.encode(t!=null?t:"")+"&comment="+Base64.encode(i!=null?i:"")+"&id="+Base64.encode(r)+"&albumId="+Base64.encode(u);window.location.href=f},createCheckbox:function(){$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})},swapRadioButton:function(){$(".iCheck-helper").click(function(){$(this).parent().children().attr("id")=="edit"?($("#delete").parent().removeClass("checked"),$("#edit").parent().addClass("checked"),$("#deletePicture").removeClass("button"),$("#deletePicture").attr("disabled","disabled"),$("#label").removeAttr("readonly"),$("#comment").removeAttr("readonly"),$("#uploadFile").removeClass("btn-default"),$("#uploadFile").addClass("button"),$("#uploadFile").removeAttr("disabled")):($("#edit").parent().removeClass("checked"),$("#delete").parent().addClass("checked"),$("#deletePicture").removeAttr("disabled",""),$("#deletePicture").addClass("button"),$("#label").attr("readonly","readonly"),$("#comment").attr("readonly","readonly"),$("#uploadFile").removeClass("button"),$("#uploadFile").addClass("btn-default"),$("#uploadFile").attr("disabled","disabled"))})},deletePicture:function(){$("#deletePicture").unbind().bind("click",function(){swal({title:"Delet Picture",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#cf7f00",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){$("#processing-modal").modal("show");picturePage.deletePictureCall();swal("Deleted!","Picture deleted successfully","success");$("#flagCheck").val("Deleted")})})},deletePictureCall:function(){var n=$("#pictureId").val(),t=$("#albumId").val();$.ajax({type:"GET",url:"/Picture/DeletePicture",data:{pictureId:n,albumId:t},datatype:"json",cache:!1,success:function(){var n=$("#flagCheck").val();picturePage.redirectToPreviousPage(n)},error:function(){$("#processing-modal").modal("hide")}})},redirectToPreviousPage:function(n){var t=$("#albumId").val(),i="/Picture/Index?id="+Base64.encode(t)+"&flagCheck="+Base64.encode(n!=undefined?n:"");window.location.href=i},uploadPicture:function(){$("#fileupload").change(function(){var t,n;$("#dvPreview").html("");t=/^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;t.test($(this).val().toLowerCase())?$.browser!=undefined&&$.browser.msie&&parseFloat(jQuery.browser.version)<=9?($("#dvPreview").show(),$("#dvPreview")[0].filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=$(this).val()):typeof FileReader!="undefined"?($("#dvPreview").show(),$("#dvPreview").append("<img />"),n=new FileReader,n.onload=function(n){$("#dvPreview img").attr("src",n.target.result)},n.readAsDataURL($(this)[0].files[0]),$("#dvPreview img").addClass("img-responsive image")):swal("Warning!","This browser does not support FileReader."):(swal("Warning!","Please upload a valid image file."),$("#dvPreview").show(),$("#dvPreview").append("<img />"),$("#dvPreview img").attr("src","/images/uploadImage.png"),$("#dvPreview img").addClass("img-responsive image"))})},validateImage:function(){$("form[name=pictureForm]").submit(function(){$("#processing-modal").modal("show");var n=$("#dvPreview img").attr("src"),t=$.trim($("#label").val()),i=$.trim($("#comment").val());return n=="/images/uploadImage.png"&&t==""&&i==""?($("#imageError").html("<b>Picture is required.<\/b>"),$("#labelError").html("<b>Label name is required.<\/b>"),$("#commentError").html("<b>Comment is required.<\/b>"),$("#processing-modal").modal("hide"),!1):n=="/images/uploadImage.png"&&t==""?($("#imageError").html("<b>Picture is required.<\/b>"),$("#labelError").html("<b>Label name is required.<\/b>"),$("#commentError").html(""),$("#processing-modal").modal("hide"),!1):n==undefined&&i==""?($("#imageError").html("<b>Picture is required.<\/b>"),$("#commentError").html("<b>Comment is required.<\/b>"),$("#labelError").html(""),$("#processing-modal").modal("hide"),!1):t==""&&i==""?($("#labelError").html("<b>Label name is required.<\/b>"),$("#commentError").html("<b>Comment is required.<\/b>"),$("#imageError").html(""),$("#processing-modal").modal("hide"),!1):n=="/images/uploadImage.png"?($("#imageError").html("<b>Picture is required.<\/b>"),$("#labelError").html(""),$("#commentError").html(""),$("#processing-modal").modal("hide"),!1):t==""?($("#labelError").html("<b>Label name is required.<\/b>"),$("#imageError").html(""),$("#commentError").html(""),$("#processing-modal").modal("hide"),!1):i==""?($("#commentError").html("<b>Comment is required.<\/b>"),$("#imageError").html(""),$("#labelError").html(""),$("#processing-modal").modal("hide"),!1):void 0})},notification:function(){var n=$("#flagCheck").val();n!=undefined&&n!=""&&($("#notification").show(),$("#notification").html("<button aria-hidden='true' data-dismiss='alert' class='close' type='button'>Ã—<\/button>Picture "+n+" Successfully."),setTimeout(function(){$("#notification").hide()},5e3))}};