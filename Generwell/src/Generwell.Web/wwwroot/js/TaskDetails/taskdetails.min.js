var TaskDetailsPage={initialize:function(n){TaskDetailsPage.attachEvents(n)},attachEvents:function(){TaskDetailsPage.completeEvent();TaskDetailsPage.updateTaskFields();TaskDetailsPage.createMyFilterCheckbox();TaskDetailsPage.changeButtonEvent()},updateTaskFields:function(){},completeTask:function(){var n=TaskDetailsPage.getViewData();$("#processing-modal").modal("hide");TaskDetailsPage.callUpdateTask(n)},callUpdateTask:function(n){$("#processing-modal").modal("show");$.ajax({type:"GET",url:"/taskdetails/updatetaskfields",data:{Content:JSON.stringify(n)},datatype:"json",cache:!1,success:function(){location.reload();$("#processing-modal").modal("hide");$("#completeTask").css("display","block");$("#ReSaveTaskFieldDetailsId").css("display","none");TaskDetailsPage.changeButtonEvent()},error:function(){$("#processing-modal").modal("hide")}})},completeEvent:function(){$("#completeTask").click(function(){swal({title:"Task Complete",text:"YES/NO complete Re-activated task?",type:"warning",showCancelButton:!0,confirmButtonColor:"#cf7f00",confirmButtonText:"Yes, update it!",closeOnConfirm:!1},function(){$("#processing-modal").modal("hide");TaskDetailsPage.completeTask();swal("updated!","Data updated successfully","success")})})},getViewData:function(){var i=[],r=[],n=[],t=0;return $(".clsedit").each(function(){var f=$(this).prop("type"),o,s,e,c,u,l;if(f=="select-one"){if(o=$(this).find(":selected").val(),s=$(this).find(":selected").text(),i.push(this.id),r.push(o),u=this.id,s=$(this).find(":selected").text(),s=="Please select one")return $("#dropdownErrorMessage_"+u).show(),n.length=0,!1;n.push('{ "op": "replace", "path": "/Fields/'+this.id+'", "value": "'+o+'"}');$("#dropdownErrorMessage_"+u).hide()}else if(f=="text")if(i.push(this.id),r.push(this.value),this.name=="date"){var u=this.id,h=this.value;if(new Date(h)<new Date("Jan 01,1990"))return $("#dateErrorMessage_"+u).show(),n.length=0,!1;if(h.length>11)return $("#inValidDateErrorMessage_"+u).show(),n.length=0,!1;n.push('{ "op": "replace", "path": "/Fields/'+i[t]+'", "value":  '+Date.parse(r[t])/1e3+"  }");$("#dateErrorMessage_"+u).hide();$("#inValidDateErrorMessage_"+u).hide()}else if(this.name=="memo"){if(u=this.id,e=this.value,e=="")return $("#memoErrorMessage_"+u).show(),n.length=0,!1;n.push('{ "op": "replace", "path": "/Fields/'+i[t]+'", "value": "'+r[t]+'"}');$("#memoErrorMessage_"+u).hide()}else u=this.id,e=this.value,e==""||(n.push('{ "op": "replace", "path": "/Fields/'+i[t]+'", "value": "'+r[t]+'"}'),$("#textErrorMessage_"+u).hide(),$("#memoErrorMessage_"+u).hide());else if(f=="checkbox"){if(c=$("input[name=checkbox]:checked"),i.push(this.id),r.push(this.value),c.length==0)return $("#checkboxErrorMessage_"+this.id).show(),n.length=0,!1;$("#checkboxErrorMessage_"+this.id).hide();n.push('{ "op": "replace", "path": "/Fields/'+i[t]+'", "value": '+$(this).prop("checked")+"   }")}else if(f=="number"){if(i.push(this.id),r.push(this.value),u=this.id,l=this.value,l>100)return $("#numberErrorMessage_"+u).show(),n.length=0,!1;n.push('{ "op": "replace", "path": "/Fields/'+i[t]+'", "value": "'+r[t]+'"}');$("#numberErrorMessage_"+u).hide()}t++}),n},createMyFilterCheckbox:function(){$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})},changeButtonEvent:function(){var n=$("#reactivatedTask").val();n.toLowerCase()=="re-activated"?($("#completeTask").css("display","block"),$("#savedDetails").css("display","none")):($("#completeTask").css("display","none"),$("#savedDetails").css("display","block"));$("#taskDetailsListTableId input,select").change(function(){$("#completeTask").css("display","none");$("#savedDetails").css("display","block");$("#savedDetails").click(function(){var n=TaskDetailsPage.getViewData();n.length>0&&TaskDetailsPage.callUpdateTask(n)})});$(".iCheck-helper").on("click",function(){$("#completeTask").css("display","none");$("#savedDetails").css("display","block")})},getPictureAlbum:function(n){var n=Base64.encode(n.toString()),t;$("#processing-modal").modal("show");t="/Picture/Index?id="+n;window.location.href=t},limitText:function(n,t){$("#completeTask").css("display","none");$("#savedDetails").css("display","block");n.value.length>t&&(n.value=n.value.substring(0,t))},check:function(n,t){if($("#completeTask").css("display","none"),$("#savedDetails").css("display","block"),!n.target.validity.valid)return n.target.value=t.substring(0,t.length-1),!1;var i=t.indexOf(".");return i>=0&&t.length-i>3?(n.target.value=t.substring(0,t.length-1),!1):!0}};