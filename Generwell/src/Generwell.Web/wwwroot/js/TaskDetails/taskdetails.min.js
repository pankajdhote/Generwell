var TaskDetailsPage={initialize:function(n){TaskDetailsPage.attachEvents(n)},attachEvents:function(){TaskDetailsPage.completeEvent();TaskDetailsPage.updateTaskFields();TaskDetailsPage.createMyFilterCheckbox();TaskDetailsPage.changeButtonEvent();TaskDetailsPage.bindEvent()},updateTaskFields:function(){},completeTask:function(){var n=[];n.push('{ "op": "replace", "path": "/Completed, "value": true}');$("#processing-modal").modal("hide");TaskDetailsPage.callUpdateTask(n)},callUpdateTask:function(n){$("#processing-modal").modal("show");$.ajax({type:"GET",url:"/taskdetails/updatetaskfields",data:{Content:JSON.stringify(n)},datatype:"json",async:!1,cache:!1,success:function(n){if($("#processing-modal").modal("hide"),n!=""){var t=jQuery.parseJSON(n),i=TaskDetailsPage.createTable(t);swal({title:"Validation Rule Errors",text:i,html:!0})}$("#processing-modal").modal("hide");$("#completeTask").css("display","block");$("#ReSaveTaskFieldDetailsId").css("display","none");TaskDetailsPage.changeButtonEvent()},error:function(){$("#processing-modal").modal("hide")}})},completeEvent:function(){$("#completeTask").click(function(){swal({title:"Task Complete",text:"YES/NO complete Re-activated task?",type:"warning",showCancelButton:!0,confirmButtonColor:"#cf7f00",confirmButtonText:"Yes, complete it!",closeOnConfirm:!1},function(){$("#processing-modal").modal("hide");TaskDetailsPage.completeTask();swal("updated!","Data updated successfully","success")})})},createTable:function(n){var t='<div class="ibox-content form-group">';for(t+="<table class='table'>",i=0;i<n.length;i++)t+='<tr><th colspan="2"><label><b>'+n[i].fieldDesc+"<\/b><\/label><\/th><\/tr>",t+="<tr><td><label>Old Value: <\/label><\/td><td><label><b>"+n[i].oldValue+"<\/b><\/label><\/td><\/tr>",t+="<tr><td><label>New Value: <\/label><\/td><td><label><b>"+n[i].newValue+"<\/b><\/label><\/td><\/tr>",t+="<tr><td><label>Instructions: <\/label><\/td><td><label><b>"+n[i].instructions+"<\/b><\/label><\/td><\/tr>";return t+="<\/div>",t+"<\/table>"},getViewData:function(){var t=[],r=[],n=[],i=0;return $(".clsedit").each(function(){var f=$(this).prop("type"),e,o,l,h,u,c;if(f=="select-one")e=$(this).find(":selected").val(),o=$(this).find(":selected").text(),t.push(this.id),r.push(e),u=this.id,o=$(this).find(":selected").text(),o=="Please select one"?(n.push('{ "op": "replace", "path": "/Fields/'+this.id+'", "value": ""}'),$("#dropdownErrorMessage_"+u).hide()):(n.push('{ "op": "replace", "path": "/Fields/'+this.id+'", "value": "'+e+'"}'),$("#dropdownErrorMessage_"+u).hide());else if(f=="text")if(t.push(this.id),r.push(this.value),this.name=="date"){var u=this.id,s=this.value;if(new Date(s)<new Date("Jan 01,1990"))return $("#dateErrorMessage_"+u).show(),n.length=0,!1;if(s.length>11)return $("#inValidDateErrorMessage_"+u).show(),n.length=0,!1;s==""?(n.push('{ "op": "replace", "path": "/Fields/'+t[i]+'", "value":  null  }'),$("#dateErrorMessage_"+u).hide(),$("#inValidDateErrorMessage_"+u).hide()):(n.push('{ "op": "replace", "path": "/Fields/'+t[i]+'", "value":  '+Date.parse(r[i])/1e3+"  }"),$("#dateErrorMessage_"+u).hide(),$("#inValidDateErrorMessage_"+u).hide())}else u=this.id,l=this.value,n.push('{ "op": "replace", "path": "/Fields/'+t[i]+'", "value": "'+r[i]+'"}'),$("#textErrorMessage_"+u).hide(),$("#memoErrorMessage_"+u).hide();else if(f=="checkbox"){if(h=$("input[name=checkbox]:checked"),t.push(this.id),r.push(this.value),h.length==0)return $("#checkboxErrorMessage_"+this.id).show(),n.length=0,!1;$("#checkboxErrorMessage_"+this.id).hide();n.push('{ "op": "replace", "path": "/Fields/'+t[i]+'", "value": '+$(this).prop("checked")+"   }")}else if(f=="number"){if(t.push(this.id),r.push(this.value),u=this.id,c=this.value,c>100)return $("#numberErrorMessage_"+u).show(),n.length=0,!1;n.push('{ "op": "replace", "path": "/Fields/'+t[i]+'", "value": "'+r[i]+'"}');$("#numberErrorMessage_"+u).hide()}i++}),n},createMyFilterCheckbox:function(){$(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})},changeButtonEvent:function(){var n=$("#reactivatedTask").val();n.toLowerCase()=="re-activated"?($("#completeTask").css("display","block"),$("#savedDetails").css("display","none")):($("#completeTask").css("display","none"),$("#savedDetails").css("display","block"));$(".iCheck-helper").on("click",function(){$("#completeTask").css("display","none");$("#savedDetails").css("display","block")})},getPictureAlbum:function(n,t){var i,t,r;i=Base64.encode(n!=null?n.toString():"");t=Base64.encode(t!=undefined?t.toString():"");$("#processing-modal").modal("show");r="/Picture/Index?id="+i+"&fieldId="+t;window.location.href=r},limitText:function(n,t){return $("#completeTask").css("display","none"),$("#savedDetails").css("display","block"),n.value.length>t?(n.value=n.value.substring(0,t),!1):void 0},limitText:function(n,t){return $("#completeTask").css("display","none"),$("#savedDetails").css("display","block"),n.value.length>t?(n.value=n.value.substring(0,t),!1):void 0},check:function(n,t,i){var r,u;return($("#completeTask").css("display","none"),$("#savedDetails").css("display","block"),!n.target.validity.valid)?(n.target.value=t.substring(0,t.length-1),!1):(r=n.which?n.which:n.keyCode,r>31&&(r<48||r>57))?!1:(u=t.indexOf("."),u>0&&t.length-u>i)?(n.target.value=t.substring(0,t.length-1),!1):!0},bindEvent:function(){$(".chk").find(".iCheck-helper").click(function(){TaskDetailsPage.setWellFollowUnfollow()});$("#taskDetailsListTableId input,select").unbind().on("keyup change",function(){$("#savedDetails").unbind().click(function(){var n=TaskDetailsPage.getViewData();n.length>0&&TaskDetailsPage.callUpdateTask(n)});TaskDetailsPage.setWellFollowUnfollow();$("#completeTask").css("display","none");$("#savedDetails").css("display","block")})},setWellFollowUnfollow:function(){var n=$("#isFollow").val();n==""&&(n="true",$("#isFollow").attr("value","checked"),$.ajax({type:"GET",dataType:"text",url:"/WellLineReport/Follow",data:{isFollow:n},cache:!1,success:function(){swal("Favorites","The corresponding well will be added to your favorite wells.");$("#taskDetailsListTableId input,select").unbind();$(".chk").find(".iCheck-helper").unbind();$("#processing-modal").modal("hide")},error:function(){$("#processing-modal").modal("hide")}}))}};